{% extends "base.twig" %}

{% block styles %}
  <link rel="stylesheet" href="{{theme.link|e('esc_url')}}/assets/css/lib/lightslider.css" />
  <script type="text/javascript" src="{{theme.link|e('esc_url')}}/assets/js/lib/lightslider.js"></script> 

  <!-- load in swiper-js css -->
  <link rel="stylesheet" href="{{theme.link|e('esc_url')}}/assets/css/lib/swiper-bundle.min.css" />
  <!-- single product styles -->
  <link rel="stylesheet" href="{{theme.link|e('esc_url')}}/assets/css/single-product.css" />
  
  <!-- <style>
    .woocommerce-page img, .woocommerce img {
      height: auto;
      max-width: 100%;
    }
  </style> -->
{% endblock %}

{% block contentwrap %}

  <div id="product-{{ post.id }}" itemscope itemtype="http://schema.org/Product" class="single-product-details {{ post.class }}">
    <div class="uk-section uk-section-default">
      <div class="uk-container">
        
        <!-- before the single product. just a location, no active hooks -->
        {% do action('woocommerce_before_single_product') %}
        
        <!-- products grid -->
        <div class="" uk-grid="masonry: true;">
          
          <div class="product-left product-left-content uk-width-3-5@m">
            <div class="custom-product-images">
              <ul id="lightSlider">
                <li data-thumb="{{ post.thumbnail.src('thumbnail') }}">
                  <div uk-lightbox>
                    <a href="{{ post.thumbnail.src }}" data-caption="{{post.title}}">
                      <img src="{{ post.thumbnail.src|resize(1200) }}" />
                    </a>
                  </div>
                </li>
                {% for attachment_id in attachment_ids %}
                  {% set attach_main = function('wp_get_attachment_image_src', attachment_id, 'sixstar-theme-product-main-image') %}
                  {% set attach_thumb = function('wp_get_attachment_image_src', attachment_id, 'thumbnail') %}
                  {% set attach_full = function('wp_get_attachment_image_src', attachment_id, 'full') %}
                  <li data-thumb="{{attach_thumb[0]}}">
                    <div uk-lightbox>
                      <a href="{{attach_full[0]}}" data-caption="{{post.title}}">
                        <img src="{{attach_main[0]}}" />
                      </a>
                    </div>
                  </li>
                {% endfor %}
              </ul>
            </div>
            {# do action('woocommerce_before_single_product_summary') #}
          </div>
          
          <div class="product-right product-right-images uk-width-2-5@m">
            {% do action('woocommerce_single_product_summary') %}
            <meta itemprop="url" content="{{ post.link|e('esc_url') }}" />
          </div>
        
        </div>
        
        <div class="tabs-related-upsells uk-margin-top">
          
          <div class="product-tabs">
            <!-- removed related & upsells from woocommerce_after_single_product_summary. tabs remains -->
            {% do action('woocommerce_after_single_product_summary') %}
          </div>
          
          <div class="product-related" hidden>
            {% if not related_products is empty %}
              <h2>{{related_products_title|e('esc_html')}}</h2>
              <div id="slideshow_related" class="swiper-container">
                <div class="swiper-wrapper">
                  
                  {% for post in related_products %}
                    <div class="swiper-slide">
                      {% include 'tease-product.twig' %}
                    </div>
                  {% endfor %}
                  
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
              </div>
            {% endif %}
          </div>
          
          <div class="product-upsells" hidden>
            {% if not up_sells is empty %}
              <h2>{{up_sells_title|e('esc_html')}}</h2>
              <div id="slideshow_upsells" class="swiper-container">
                <div class="swiper-wrapper">
                  
                  {% for post in up_sells %}
                    <div class="swiper-slide">
                      {% include 'tease-product.twig' %}
                    </div>
                  {% endfor %}
                  
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
              </div>
            {% endif %}
          </div>
          
        </div>
        
        <!-- after the single product. just a location, no active hooks -->
        {% do action('woocommerce_after_single_product') %}
        
      </div>
    </div>  
  </div>
{% endblock %}

{% block scripts %}
  <!-- load in swiper-js js -->
  <script src="{{theme.link|e('esc_url')}}/assets/js/lib/swiper-bundle.min.js"></script>
  <script type='text/javascript' src='{{theme.link|e('esc_url')}}/assets/js/woo/single-product.js'></script>
{% endblock %}