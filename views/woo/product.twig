{% extends "base.twig" %}

{% block styles %}
  <link rel="stylesheet" href="{{theme.link}}/assets/css/lib/lightslider.css" />
  <script type="text/javascript" src="{{theme.link}}/assets/js/lib/lightslider.js"></script> 
  <link rel="stylesheet" href="{{theme.link}}/assets/css/lib/swiper-bundle.min.css" />
  <link rel="stylesheet" href="{{theme.link}}/assets/css/product.css" />
{% endblock %}

{% block header %}
  <header>
    <div class="header-top-nav theme-border-bottom">
      <div uk-sticky="animation: uk-animation-slide-top; sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; cls-inactive: uk-navbar-transparent; top: 200">
        {% include 'main-nav.twig' %}
      </div>
    </div>
  </header>
{% endblock %}

{% block contentwrap %}

  <div id="product-{{ post.id }}" itemscope itemtype="http://schema.org/Product" class="single-product-details {{ post.class }}">
    <div class="uk-section uk-section-default">
      <div class="uk-container">
        
        <!-- before the single product. just a location, no active hooks -->
        {% do action('woocommerce_before_single_product') %}
        
        <!-- products grid -->
        <div class="" uk-grid="masonry: true;">
          
          <div class="product-left product-left-content uk-width-3-5@m">
            <div class="custom-product-images">
              <ul id="lightSlider">
                <li data-thumb="{{ post.thumbnail.src('thumbnail') }}">
                  <div uk-lightbox>
                    <a href="{{ post.thumbnail.src }}" data-caption="{{post.title}}">
                      <img src="{{ post.thumbnail.src|resize(1200) }}" />
                    </a>
                  </div>
                </li>
                {% for attachment_id in attachment_ids %}
                  {% set attach_main = function('wp_get_attachment_image_src', attachment_id, 'sixstar-theme-product-main-image') %}
                  {% set attach_thumb = function('wp_get_attachment_image_src', attachment_id, 'thumbnail') %}
                  {% set attach_full = function('wp_get_attachment_image_src', attachment_id, 'full') %}
                  <li data-thumb="{{attach_thumb[0]}}">
                    <div uk-lightbox>
                      <a href="{{attach_full[0]}}" data-caption="{{post.title}}">
                        <img src="{{attach_main[0]}}" />
                      </a>
                    </div>
                  </li>
                {% endfor %}
              </ul>
            </div>
            {% do action('woocommerce_before_single_product_summary') %}
          </div>
          
          <div class="product-right product-right-images uk-width-2-5@m">
            {% do action('woocommerce_single_product_summary') %}
            <meta itemprop="url" content="{{ post.link|e('esc_url') }}" />
          </div>
        
        </div>
        
        <div class="tabs-related-upsells uk-margin-top">
          
          <div class="product-tabs">
            <!-- removed related & upsells from woocommerce_after_single_product_summary. tabs remains -->
            {% do action('woocommerce_after_single_product_summary') %}
          </div>
          
          {% if not up_sells is empty %}
            <div class="product-upsells uk-margin-medium-top">
              <h2 class="uk-h3">
                {{up_sells_title|e('esc_html')}}
                {{ _x('You may also like...', 'Upsell Competitions Title', 'cautious-octo-fiesta')|e('esc_html') }}
              </h2>
              <div id="slideshow_upsells" class="swiper-container">
                <div class="swiper-wrapper">
                  
                  {% for post in up_sells %}
                    <div class="swiper-slide">
                      {% include 'tease-product-list.twig' %}
                    </div>
                  {% endfor %}
                  
                </div>
                {% if up_sells|length > 1 %}
                  <!-- Add Pagination -->
                  <div class="swiper-pagination"></div>
                {% endif %}
              </div>
            </div>
          {% endif %}
          
          {% if not related_products is empty %}
            <div class="product-related uk-margin-medium-top">
              <h2 class="uk-h3">
                {{ _x('Related Competitions', 'Related Competitions Title', 'cautious-octo-fiesta')|e('esc_html') }}
              </h2>
              <div id="slideshow_related" class="swiper-container">
                <div class="swiper-wrapper">
                  
                  {% for post in related_products %}
                    <div class="swiper-slide">
                      {% include 'tease-product-list.twig' %}
                    </div>
                  {% endfor %}
                  
                </div>
                {% if related_products|length > 1 %}
                  <!-- Add Pagination -->
                  <div class="swiper-pagination"></div>
                {% endif %}
              </div>
            </div>
          {% endif %}
          
        </div>
        
        <!-- after the single product. just a location, no active hooks -->
        {% do action('woocommerce_after_single_product') %}
        
      </div>
    </div>  
  </div>
{% endblock %}

{% block subscribe %}
{% endblock %}

{% block scripts %}
  <script src="{{theme.link}}/assets/js/lib/swiper-bundle.min.js"></script>
  <script type='text/javascript' src='{{theme.link}}/assets/js/product.js'></script>
{% endblock %}