{# translation-ready, escaped, formatted, semantic #}
{% extends "page.twig" %}

{% block styles %}
  {# product specific styles #}
  <script type="text/javascript" src="{{theme.link}}/assets/js/lib/lightslider.js"></script> 
  <link rel="stylesheet" href="{{theme.link}}/assets/css/lib/lightslider.css" />
  <link rel="stylesheet" href="{{theme.link}}/assets/css/product.css" />
{% endblock %}

{% block header %}
  <header class="header-top-nav theme-border-bottom">
    <div uk-sticky="animation: uk-animation-slide-top; sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; cls-inactive: uk-navbar-transparent; top: 200">
      {% include 'header-nav.twig' %}
    </div>
  </header>
{% endblock %}

{% block contentwrap %}
  <article id="Product-{{ post.id|e('esc_html') }}" class="single-product-details {{ post.class|e('esc_html') }}" itemscope itemtype="http://schema.org/Product" data-template="product.twig">
    
    {# product details/entry, thumb gallery & tabs #}
    <section class="main-product uk-section">
      <div class="product-details uk-container uk-container-xsmall uk-margin-medium-bottom">
        {% do action('woocommerce_before_single_product') %}
        <div class="uk-flex" uk-grid>
          <div class="uk-width-1-3@m">
            <div class="product-images">
              <div class="custom-product-images">
                <ul id="lightSlider" uk-lightbox>
                  <li data-thumb="{{ post.thumbnail.src('thumbnail')|e('esc_url') }}">
                    <div>
                      <a href="{{ post.thumbnail.src|e('esc_url') }}" data-caption="{{post.title|e('esc_html')}}">
                        <img src="{{ post.thumbnail.src|resize(1200)|e('esc_url') }}" alt="{{ post.thumbnail.alt|e('esc_html') }}" />
                      </a>
                    </div>
                  </li>
                  {% for attachment_id in attachment_ids %}
                    {% set attach_main = function('wp_get_attachment_image_src', attachment_id, 'sixstar-theme-product-main-image') %}
                    {% set attach_thumb = function('wp_get_attachment_image_src', attachment_id, 'thumbnail') %}
                    {% set attach_full = function('wp_get_attachment_image_src', attachment_id, 'full') %}
                    {% set attach_alt = function('get_post_meta', attachment_id, '_wp_attachment_image_alt', true) %}
                    <li data-thumb="{{attach_thumb[0]|e('esc_url')}}">
                      <div>
                        <a href="{{attach_full[0]|e('esc_url')}}" data-caption="{{attach_alt[0]|e('esc_html')}}">
                          <img src="{{attach_main[0]|e('esc_url')}}" />
                        </a>
                      </div>
                    </li>
                  {% endfor %}
                </ul>
              </div>
              {% do action('woocommerce_before_single_product_summary') %}
            </div>
          </div>
          <div class="uk-width-2-3@m uk-flex-first@m">
            <div class="custom-title-price-excerpt uk-position-relative">
              {% do action('single_sales_flash') %}
              {% do action('single_title') %}
              {% do action('single_price') %}
              {% do action('single_excerpt') %}
            </div>
          </div>
        </div>
        {% do action('woocommerce_single_product_summary') %}
        <meta itemprop="url" content="{{ post.link|e('esc_url') }}" />
      </div>
      
      <div class="tabs uk-container uk-container-small uk-margin-large-top">
        {% do action('woocommerce_after_single_product_summary') %}
      </div>
    </section>
    
    {% do action('rmcc_after_product_details') %}
    
    {# woocommerce_before_single_product is in before the product details above #}
    {% do action('woocommerce_after_single_product') %}
    
  </article>
{% endblock %}

{% block subscribe %}
{% endblock %}

{% block scripts %}
  <script type='text/javascript'>
    // lightslider config -> product thumb gallery
    jQuery('#lightSlider').lightSlider({
      gallery: true,
      item: 1,
      loop: true,
      slideMargin: 0,
      thumbItem: 6,
      galleryMargin: 10,
      thumbMargin: 10,
    });
    // single product customizations
    jQuery(function($) {
      // notices 
      $(".woocommerce-notices-wrapper .button").addClass("uk-button uk-button-primary uk-button-small uk-margin-right");
      
      // add-to-cart
      $(".variations_form table").addClass("uk-table-small uk-table-divider uk-table-middle uk-table-justify uk-position-relative");
      $(".variations_form .button").addClass("uk-button-primary");
      
      $(".tab-content h2").addClass("uk-h4");
      
      // additional info tab
      $(".woocommerce-product-attributes").addClass("uk-table-small uk-table-divider uk-table-middle uk-table-justify");
      
      // reviews tab
      $("ol.commentlist").addClass("uk-list uk-list-divider");
      
      // add-to-cart buttons
      $(".product-details .button").addClass("uk-button-primary");
      
      // stock
      $(".in-stock").addClass("uk-text-success");
      $(".out-of-stock").addClass("uk-text-danger");

      // comp
      $(".pick-number h3").addClass("uk-h4");
      // hide comp data
      $(".lottery-end").attr("hidden", true);
      $(".min-pariticipants").attr("hidden", true);
      // $(".max-pariticipants").attr("hidden", true);
      $(".cureent-participating").attr("hidden", true);
      $(".product_meta").attr("hidden", true);
      // $(".tab-content h2").attr("hidden", true);
      
    });
  </script>
{% endblock %}